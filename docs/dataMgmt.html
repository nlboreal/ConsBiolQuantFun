<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>3 Part 1. Data Wrangling | Introduction to Quantitative Techniques in R for Conservation Biology</title>
  <meta name="description" content="This is a manual for the Quantitative Techniques Module in BIOL 4651/7944 (Conservation in Practice)" />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="3 Part 1. Data Wrangling | Introduction to Quantitative Techniques in R for Conservation Biology" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is a manual for the Quantitative Techniques Module in BIOL 4651/7944 (Conservation in Practice)" />
  <meta name="github-repo" content="rstudio/ConsBiolQuantFun" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="3 Part 1. Data Wrangling | Introduction to Quantitative Techniques in R for Conservation Biology" />
  
  <meta name="twitter:description" content="This is a manual for the Quantitative Techniques Module in BIOL 4651/7944 (Conservation in Practice)" />
  

<meta name="author" content="Dr. Yolanda Wiersma" />


<meta name="date" content="2021-02-17" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="data.html"/>
<link rel="next" href="graphs.html"/>
<script src="libs/header-attrs-2.6/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">AIntroduction to Quantitative Techniques in R for Conservation Biology</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="chapter" data-level="2" data-path="data.html"><a href="data.html"><i class="fa fa-check"></i><b>2</b> Data for this manual</a></li>
<li class="chapter" data-level="3" data-path="dataMgmt.html"><a href="dataMgmt.html"><i class="fa fa-check"></i><b>3</b> Part 1. Data Wrangling</a>
<ul>
<li class="chapter" data-level="3.1" data-path="dataMgmt.html"><a href="dataMgmt.html#step-1---install-package-and-read-in-files"><i class="fa fa-check"></i><b>3.1</b> Step 1 - Install package and read in files</a></li>
<li class="chapter" data-level="3.2" data-path="dataMgmt.html"><a href="dataMgmt.html#step-2-create-a-new-column-and-add-it-to-a-dataframe"><i class="fa fa-check"></i><b>3.2</b> Step 2: Create a new column and add it to a dataframe</a></li>
<li class="chapter" data-level="3.3" data-path="dataMgmt.html"><a href="dataMgmt.html#step-3-querying-and-filtering-the-data"><i class="fa fa-check"></i><b>3.3</b> Step 3: Querying and filtering the data</a></li>
<li class="chapter" data-level="3.4" data-path="dataMgmt.html"><a href="dataMgmt.html#step-4.-grouping-and-joining-data"><i class="fa fa-check"></i><b>3.4</b> Step 4. Grouping and Joining Data</a></li>
<li class="chapter" data-level="3.5" data-path="dataMgmt.html"><a href="dataMgmt.html#what-to-hand-in-for-part-1."><i class="fa fa-check"></i><b>3.5</b> What to hand in for Part 1.</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="graphs.html"><a href="graphs.html"><i class="fa fa-check"></i><b>4</b> Part 2. Making Effective Graphs</a>
<ul>
<li class="chapter" data-level="4.1" data-path="graphs.html"><a href="graphs.html#your-assignment-for-part-2"><i class="fa fa-check"></i><b>4.1</b> Your assignment for Part 2</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="stats.html"><a href="stats.html"><i class="fa fa-check"></i><b>5</b> Part 3. Statistical Analysis</a>
<ul>
<li class="chapter" data-level="5.1" data-path="stats.html"><a href="stats.html#univariate-analysis"><i class="fa fa-check"></i><b>5.1</b> Univariate Analysis</a></li>
<li class="chapter" data-level="5.2" data-path="stats.html"><a href="stats.html#multivariate-analysis"><i class="fa fa-check"></i><b>5.2</b> Multivariate Analysis</a></li>
<li class="chapter" data-level="5.3" data-path="stats.html"><a href="stats.html#your-assignment-for-part-3"><i class="fa fa-check"></i><b>5.3</b> Your assignment for Part 3</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Introduction to Quantitative Techniques in R for Conservation Biology</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="dataMgmt" class="section level1" number="3">
<h1><span class="header-section-number">3</span> Part 1. Data Wrangling</h1>
<p>This section teaches some tricks and tips for data wrangling using the <code>dplyr</code> package. It reviews some of the more detailed introduction to <code>dplyr</code> from BIOL 1002 labs. If you would like to review the lab manual for BIOL 1002, you can access it <a href="https://jakep962.github.io/Biol_1002/index.html">here</a>.</p>
<p>A useful “cheatsheet” to print out and hang by your desk for this module is the <code>dplyr</code> <a href="https://rstudio.com/wp-content/uploads/2015/02/data-wrangling-cheatsheet.pdf">cheatsheet</a></p>
<div id="step-1---install-package-and-read-in-files" class="section level2" number="3.1">
<h2><span class="header-section-number">3.1</span> Step 1 - Install package and read in files</h2>
<ul>
<li><p>install and load the package <code>dplyr</code> (if you don’t remember how to do this, refer to Section 4.10 of the <a href="https://ahurford.github.io/quant-guide-all-courses/rintro.html#r-packages">Biology R Guide</a></p></li>
<li><p>read in the three data sets. The code is given below, you can chose to give the dataframes different names, but for ease of following along it would be wise to use the same as here.</p></li>
</ul>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="dataMgmt.html#cb1-1" aria-hidden="true" tabindex="-1"></a>MACPsites <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;MACPsites.csv&quot;</span>)</span>
<span id="cb1-2"><a href="dataMgmt.html#cb1-2" aria-hidden="true" tabindex="-1"></a>MACPspp <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;MACPspp.csv&quot;</span>)</span>
<span id="cb1-3"><a href="dataMgmt.html#cb1-3" aria-hidden="true" tabindex="-1"></a>MACPtraits <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;MACPtraits.csv&quot;</span>)</span></code></pre></div>
</div>
<div id="step-2-create-a-new-column-and-add-it-to-a-dataframe" class="section level2" number="3.2">
<h2><span class="header-section-number">3.2</span> Step 2: Create a new column and add it to a dataframe</h2>
<p>Use the <code>mutate</code> function in <code>dplyr</code> to create a column which sums all the species at that site, and writie it to a new dataframe called MACPspp_sum. Note that this is a row-wise function and that I am using the <code>pipes</code> tool (denoted by the <code>%&gt;%</code> symbol). If you would like to review using pipes, see Section 2.1.5 of the manual for <a href="https://jakep962.github.io/Biol_1002/week1.html#lab1">BIOL1002</a>.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="dataMgmt.html#cb2-1" aria-hidden="true" tabindex="-1"></a>MACPspp_sum <span class="ot">&lt;-</span> MACPspp <span class="sc">%&gt;%</span></span>
<span id="cb2-2"><a href="dataMgmt.html#cb2-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rowwise</span>() <span class="sc">%&gt;%</span></span>
<span id="cb2-3"><a href="dataMgmt.html#cb2-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">sppRich =</span> <span class="fu">sum</span>(<span class="fu">c_across</span>(ABRhyp<span class="sc">:</span>XYLnig)))</span></code></pre></div>
</div>
<div id="step-3-querying-and-filtering-the-data" class="section level2" number="3.3">
<h2><span class="header-section-number">3.3</span> Step 3: Querying and filtering the data</h2>
<p>Use the <code>filter</code> function in <code>dplyr</code> to select only those sites that have more than 80 species and use this to create a new dataframe called MACPhotspots. Check Section 2.1.1 of the Manual for <a href="https://jakep962.github.io/Biol_1002/week1.html#lab1">BIOL1002</a> to review the code.</p>
<p><strong>HAND IN</strong> Then try using a function to find out what the highest species richness is across all sites (<strong>HINT</strong> another word for highest richness is <code>max</code> richness). Describe what function you used (a code snippet would be fine!)</p>
</div>
<div id="step-4.-grouping-and-joining-data" class="section level2" number="3.4">
<h2><span class="header-section-number">3.4</span> Step 4. Grouping and Joining Data</h2>
<p>Because both the MACPsites data and the MACPspp data are arranged in rows, with one row per site, we can combine them into one dataframe that contains both the species and the environment data. We can do it like this:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="dataMgmt.html#cb3-1" aria-hidden="true" tabindex="-1"></a>MACPall <span class="ot">&lt;-</span> <span class="fu">inner_join</span>(MACPsites, MACPspp_sum, <span class="at">by =</span> <span class="st">&quot;site&quot;</span>)</span></code></pre></div>
<p><strong>HAND IN</strong>: How would you confirm that you have done this correctly (there are different ways)?</p>
<p>Sometimes we might want to group and summarize the data in different ways. For example, we might want to group the data by Ecoregion and then see what the mean richness is per ecoregion, to see if some ecoregions have higher richness than others. In the next section we will use these summary data to make some graphs.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="dataMgmt.html#cb4-1" aria-hidden="true" tabindex="-1"></a>EcoR_spp <span class="ot">&lt;-</span> <span class="fu">group_by</span>(MACPall, ER)</span>
<span id="cb4-2"><a href="dataMgmt.html#cb4-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-3"><a href="dataMgmt.html#cb4-3" aria-hidden="true" tabindex="-1"></a>EcoR_spp_mean <span class="ot">&lt;-</span> <span class="fu">summarize</span>(EcoR_spp, <span class="at">mean_rich =</span> <span class="fu">mean</span>(sppRich))</span>
<span id="cb4-4"><a href="dataMgmt.html#cb4-4" aria-hidden="true" tabindex="-1"></a>EcoR_spp_se <span class="ot">&lt;-</span> <span class="fu">summarize</span>(EcoR_spp, <span class="at">se_rich =</span> <span class="fu">sd</span>(sppRich))</span></code></pre></div>
</div>
<div id="what-to-hand-in-for-part-1." class="section level2" number="3.5">
<h2><span class="header-section-number">3.5</span> What to hand in for Part 1.</h2>
<p>Summarize the results from above where it says <strong>HAND IN</strong>. As well, in one or two sentences explain the difference between the <code>select</code> , <code>filter</code> and <code>mutate</code> functions in the package <code>dplyr</code>.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="data.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="graphs.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown-demo/edit/master/02-dataMgmt.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["ConsBiolQuantFun.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
